(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n(25),s=n.n(a),i=n(3),o=n.n(i),u=n(6),l=function(e,t){return clearTimeout(r),function(){var n=Object(u.a)(o.a.mark((function n(c){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c({type:"NEW NOTIFICATION",notification:e}),r=setTimeout((function(){c({type:"REMOVE NOTIFICATION",notification:null})}),t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW NOTIFICATION":return e=t.notification;case"REMOVE NOTIFICATION":return t.notification;default:return e}},j=n(55),b=n(33),h=n(56),p=n(34),f=n(21),O=n.n(f),x="/api/blogs",v=null,g={getAll:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(x);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setToken:function(e){v="bearer ".concat(e)},create:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,O.a.post(x,t,n);case 3:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:v}},e.next=3,O.a.put("".concat(x,"/").concat(t),n,r);case 3:return c=e.sent,console.log(c),e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,O.a.delete("".concat(x,"/").concat(t),n);case 3:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createComments:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:v}},e.next=3,O.a.post("".concat(x,"/").concat(t,"/comments"),n,r);case 3:return c=e.sent,console.log(c.data),e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.create(e);case 2:r=t.sent,n({type:"NEW BLOG",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e,t){return function(){var n=Object(u.a)(o.a.mark((function n(r){var c;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.update(t,e);case 2:c=n.sent,r({type:"LIKE",data:c,id:t});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},y=function(e,t){return function(){var n=Object(u.a)(o.a.mark((function n(r){var c;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.createComments(e,t);case 2:c=n.sent,r({type:"NEW COMMENT",data:c,id:e});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIAL BLOGS":return e=t.data;case"NEW BLOG":return e.concat(t.data);case"LIKE":var n=e.find((function(e){return e.id===t.id})),r=Object(p.a)(Object(p.a)({},n),{},{likes:t.data.likes});return e.map((function(e){return e.id===t.id?r:e}));case"DELETE":var c=t.data;return e.filter((function(e){return e.id!==c.id}));case"NEW COMMENT":var a=e.find((function(e){return e.id===t.id})),s=Object(p.a)(Object(p.a)({},a),{},{comments:t.data.comments});return e.map((function(e){return e.id===t.id?s:e}));default:return e}},N={login:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("/api/login",t);case 2:return n=e.sent,console.log(n.data),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C="loggedBlogappUser",L=function(){return JSON.parse(localStorage.getItem(C))};console.log(L);var I=function(e){localStorage.setItem(C,JSON.stringify(e))},T=L,E=function(e,t){return console.log(e,t),function(){var n=Object(u.a)(o.a.mark((function n(r){var c;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,N.login({username:e,password:t});case 3:c=n.sent,console.log(c),r({type:"LOGIN",data:c}),I(c),g.setToken(c.token),r(l("welcome to the blog app",5e3)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),r(l("wrong username or password",5e3));case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"LOGOUT":return e=t.data;default:return e}},S={getAll:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},B=function(){return function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getAll();case 2:n=e.sent,t({type:"INITIAL USERS",data:n}),console.log(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIAL USERS":return e=t.data;default:return e}},W=Object(b.combineReducers)({notification:d,blogs:k,user:A,userList:U}),G=Object(b.createStore)(W,Object(j.composeWithDevTools)(Object(b.applyMiddleware)(h.a)));console.log(G.getState());var D=n(16),M=n(19),R=n(9),z=n(20),F=n(1),J=function(){return Object(F.jsx)("div",{children:Object(F.jsx)("h1",{children:"Welcome to the BlogApp"})})},K=n(121),P=n(103),V=n(122),H=n(123),Y=n(124),q=n(125),Q=n(129),X=n(61),Z=n.n(X),$=function(e){var t=e.blogs,n=e.user,r=Object(D.b)(),c=function(e){var n=t.find((function(t){return t.id===e}));if(!0===window.confirm("Remove blog  ".concat(n.title," by ").concat(n.author)))try{r(function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.remove(e);case 2:r=t.sent,n({type:"DELETE",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),r(l("".concat(n.title," by ").concat(n.author," deleted"),5e3))}catch(c){r(l(c.message,5e3))}else r(l("Nothing was deleted",5e3))};return Object(F.jsx)("div",{children:Object(F.jsx)(K.a,{component:P.a,children:Object(F.jsx)(V.a,{style:{width:"80%",marginLeft:"60px"},children:Object(F.jsx)(H.a,{children:t.sort((function(e,t){return t.likes-e.likes})).map((function(e){return Object(F.jsxs)(Y.a,{children:[Object(F.jsx)(q.a,{children:Object(F.jsx)(z.b,{to:"/blogs/".concat(e.id),children:e.title})}),Object(F.jsx)(q.a,{children:n.name===e.user.name?Object(F.jsx)(Q.a,{style:{backgroundColor:"lavender"},onClick:function(){return c(e.id)},children:Object(F.jsx)(Z.a,{})}):""})]},e.id)}))})})})})},_=n(62),ee=n.n(_),te=n(63),ne=n.n(te),re=(n(97),function(e){var t=e.match,n=e.blogs;console.log([1,2,3,4].filter((function(e){return 2!==e})));var r=Object(c.useState)(null),a=Object(M.a)(r,2),s=a[0],i=a[1],d=Object(D.b)();console.log(t);var j=t?n.find((function(e){return e.id===t.params.id})):null;console.log(j);var b=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===s||""===s.desc)d(l("Empty comment.",5e3));else try{t=j.id,n={user:j.user.id,likes:j.likes,author:j.author,title:j.title,url:j.url,comments:j.comments.concat(s)},d(y(t,n)),d(l("New comment added for the blogpost  ".concat(n.title),5e3))}catch(r){console.log("error")}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=j.id,n={user:j.user.id,likes:j.likes+1,author:j.author,title:j.title,url:j.url,comments:j.comments},d(w(n,t)),d(l("You have voted ".concat(n.title),5e3))}catch(r){d(l(r.message,5e3))}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return j?Object(F.jsxs)("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},children:[Object(F.jsxs)("div",{className:"Blog",children:[Object(F.jsxs)("h2",{children:[" ",Object(F.jsx)("span",{children:j.title})," ",j.author]}),Object(F.jsx)("a",{href:j.url,target:"blank",children:j.url}),Object(F.jsxs)("p",{children:[j.likes," likes"]}),Object(F.jsx)(Q.a,{id:"likeButton",style:{backgroundColor:"lavender"},onClick:h,children:Object(F.jsx)(ee.a,{})}),Object(F.jsxs)("p",{children:["Added by ",j.user.name]})]}),Object(F.jsxs)("div",{children:[Object(F.jsx)("p",{children:"Comment:"}),Object(F.jsx)("input",{id:"comments",onChange:function(e){e.preventDefault(),i({desc:e.target.value})},className:"comment"}),Object(F.jsxs)(Q.a,{onClick:b,children:[Object(F.jsx)(ne.a,{})," "]}),Object(F.jsx)("h1",{children:"Comments"}),Object(F.jsx)(V.a,{children:Object(F.jsx)(H.a,{children:j.comments.map((function(e,t){return Object(F.jsxs)(Y.a,{children:[" ",Object(F.jsx)(q.a,{children:e.desc})]},t)}))})})]})]}):Object(F.jsx)("div",{children:"What the hell"})}),ce=n(126),ae=function(e){var t=e.users;return null===t?Object(F.jsx)("div",{}):Object(F.jsxs)("div",{children:[Object(F.jsx)("h1",{children:"Users"}),Object(F.jsx)(K.a,{component:P.a,children:Object(F.jsxs)(V.a,{style:{width:"80%",marginLeft:"60px"},children:[Object(F.jsx)(ce.a,{children:Object(F.jsxs)(Y.a,{children:[Object(F.jsx)(q.a,{children:Object(F.jsx)("strong",{children:"User"})}),Object(F.jsx)(q.a,{style:{fontsize:"50"},children:Object(F.jsx)("strong",{children:"Blogs"})})]})}),Object(F.jsx)(H.a,{children:t.map((function(e){return Object(F.jsxs)(Y.a,{children:[Object(F.jsx)(q.a,{children:Object(F.jsx)(z.b,{to:"/users/".concat(e.id),children:e.name})}),Object(F.jsx)(q.a,{children:e.blogs.length})]},e.id)}))})]})})]})},se=function(e){var t=e.userList,n=e.match;console.log(t),console.log(n.params.id);var r=n?t.find((function(e){return e.id===n.params.id})):null;return console.log(r),r?Object(F.jsxs)("div",{children:[Object(F.jsxs)("h1",{children:[r.name," ","'s blog",":"]}),Object(F.jsx)("h3",{children:"Added blogs:"}),Object(F.jsx)(V.a,{style:{width:"40%"},children:r.blogs.map((function(e){return Object(F.jsxs)(Y.a,{children:[" ",Object(F.jsx)(q.a,{children:e.title})]},e.id)}))})]}):null},ie=(n(98),function(e){var t=e.handleSubmit,n=e.handleUsernameChange,r=e.handlePasswordChange,c=e.username,a=e.password;return Object(F.jsxs)("div",{className:"login",children:[Object(F.jsx)("h1",{children:"Login"}),Object(F.jsxs)("form",{onSubmit:t,children:[Object(F.jsxs)("div",{children:[Object(F.jsx)("h3",{children:"Username:"}),Object(F.jsx)("input",{id:"username",value:c,onChange:n})]}),Object(F.jsxs)("div",{children:[Object(F.jsx)("h3",{children:"Password:"}),Object(F.jsx)("input",{id:"password",type:"Password",name:"password",value:a,onChange:r})]}),Object(F.jsx)("button",{id:"login-button",type:"submit",children:"login"}),Object(F.jsx)("p",{children:" username: Biswas KC"}),Object(F.jsx)("p",{children:" password: Terobau"})]})]})});n(99);function oe(e){var t=e.createBlog,n=Object(c.useState)(""),r=Object(M.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(""),o=Object(M.a)(i,2),u=o[0],l=o[1],d=Object(c.useState)(""),j=Object(M.a)(d,2),b=j[0],h=j[1];return Object(F.jsx)("div",{className:"formDiv",children:Object(F.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({title:a,author:u,url:b}),s(""),l(""),h("")},children:[Object(F.jsxs)("p",{children:[Object(F.jsx)("h3",{children:"Title:"}),Object(F.jsx)("input",{id:"title",onChange:function(e){e.preventDefault(),s(e.target.value)}})]}),Object(F.jsxs)("p",{children:[Object(F.jsx)("h3",{children:"Author:"}),Object(F.jsx)("input",{id:"author",onChange:function(e){l(e.target.value)}})]}),Object(F.jsxs)("p",{children:[Object(F.jsx)("h3",{children:"Url:"}),Object(F.jsx)("input",{id:"url",onChange:function(e){h(e.target.value)}})]}),Object(F.jsx)("p",{children:Object(F.jsx)("button",{id:"save",type:"submit",children:"save"})})]})})}n(100);function ue(){var e=Object(D.c)((function(e){return e.notification}));return null===e?Object(F.jsx)("div",{children:""}):e.includes("a new blog")||e.includes("has logged ")||e.includes("have voted")?Object(F.jsx)("div",{className:"addMessage",children:Object(F.jsx)("p",{children:e})}):Object(F.jsx)("div",{className:"error",children:Object(F.jsx)("p",{children:e})})}var le=function(e){var t=Object(c.useState)(!1),n=Object(M.a)(t,2),r=n[0],a=n[1],s={display:r?"none":""},i={display:r?"":"none"},o=function(){a(!r)};return Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{style:s,children:Object(F.jsx)("button",{onClick:o,children:e.buttonLabel})}),Object(F.jsx)("div",{style:i,children:Object(F.jsxs)("div",{className:"togglableChildren",children:[e.children,Object(F.jsx)("button",{onClick:o,children:"cancel"})]})})]})};le.displayName="Togglable";var de=le,je=n(127),be=n(128),he=n(64),pe=n.n(he),fe=function(){var e=Object(c.useState)(""),t=Object(M.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(M.a)(a,2),i=s[0],d=s[1],j=Object(D.b)(),b=Object(D.c)((function(e){return e.user})),h=Object(D.c)((function(e){return e.blogs})),p=Object(D.c)((function(e){return e.userList}));Object(c.useEffect)((function(){j(function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getAll();case 2:n=e.sent,t({type:"INITIAL BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[j]),Object(c.useEffect)((function(){var e,t=T();j((e=t,function(){var t=Object(u.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I(e),null!==e&&g.setToken(e.token),t.next=4,n({type:"LOGIN",data:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[j]),Object(c.useEffect)((function(){j(B())}),[j]);var f=Object(R.g)("/users/:id"),O=Object(R.g)("/blogs/:id");console.log(O);var x=Object(R.f)(),v=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(E(n,i)),t.preventDefault(),r(""),d(""),x.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.title&&t.author&&(j(m(t)),j(B()),j(l("a new blog '".concat(t.title,"' by ").concat(t.author," added!"),5e3)))}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===b?Object(F.jsxs)("div",{children:[Object(F.jsx)(ue,{}),Object(F.jsx)(de,{buttonLabel:"log in",children:Object(F.jsx)(ie,{username:n,password:i,handleUsernameChange:function(e){var t=e.target;return r(t.value)},handlePasswordChange:function(e){var t=e.target;return d(t.value)},handleSubmit:v})})]}):null!==b?Object(F.jsxs)("div",{className:"App",children:[Object(F.jsx)(je.a,{position:"static",class:"AppBar",children:Object(F.jsxs)(be.a,{style:{padding:"10",marginLeft:"20px"},children:[Object(F.jsx)(z.b,{class:"AppBarLink",to:"/",children:"Home"}),Object(F.jsx)(z.b,{class:"AppBarLink",to:"/blogs",children:"Blogs"}),Object(F.jsx)(z.b,{class:"AppBarLink",to:"/users",children:"Users"}),Object(F.jsx)(pe.a,{style:{marginLeft:"190px"}}),Object(F.jsx)("em",{style:{padding:"10"},children:b.name}),Object(F.jsx)(Q.a,{style:{padding:"10",marginLeft:"60px",backgroundColor:"lavender"},onClick:function(){window.localStorage.removeItem("loggedBlogappUser"),j(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT",data:null}),t(l("logged out",5e3));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"logout"})]})}),Object(F.jsx)("div",{children:Object(F.jsx)(ue,{})}),Object(F.jsxs)(R.c,{children:[Object(F.jsx)(R.a,{path:"/users/:id",children:Object(F.jsx)(se,{match:f,userList:p})}),Object(F.jsx)(R.a,{path:"/blogs/:id",children:Object(F.jsx)(re,{match:O,user:b,blogs:h})}),Object(F.jsxs)(R.a,{path:"/blogs",children:[Object(F.jsx)("h2",{children:"Create new Blog:"}),Object(F.jsx)(de,{buttonLabel:"create blog",children:Object(F.jsx)(oe,{createBlog:w,user:b})}),Object(F.jsx)("h1",{children:"Blogs:"}),Object(F.jsx)($,{user:b,blogs:h})]}),Object(F.jsxs)(R.a,{path:"/users",children:[" ",Object(F.jsx)(ae,{users:p})]}),Object(F.jsx)(R.a,{path:"/",children:Object(F.jsx)(J,{})})]}),Object(F.jsx)("div",{className:"footer",children:Object(F.jsx)("em",{className:"footerText",children:"Copyrights @Biswas KC 2021"})})]}):void 0};s.a.render(Object(F.jsx)(D.a,{store:G,children:Object(F.jsx)(z.a,{children:Object(F.jsx)(fe,{})})}),document.getElementById("root"))},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.c226a5f5.chunk.js.map