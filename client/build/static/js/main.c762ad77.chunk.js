(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n(25),s=n.n(a),i=n(3),o=n.n(i),u=n(6),l=function(e,t){return clearTimeout(r),function(){var n=Object(u.a)(o.a.mark((function n(c){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c({type:"NEW NOTIFICATION",notification:e}),r=setTimeout((function(){c({type:"REMOVE NOTIFICATION",notification:null})}),t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW NOTIFICATION":return e=t.notification;case"REMOVE NOTIFICATION":return t.notification;default:return e}},j=n(54),b=n(33),h=n(55),p=n(34),f=n(21),O=n.n(f),x="/api/blogs",v=null,g=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(x);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,O.a.post(x,t,n);case 3:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:v}},e.next=3,O.a.put("".concat(x,"/").concat(t),n,r);case 3:return c=e.sent,console.log(c),e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,O.a.delete("".concat(x,"/").concat(t),n);case 3:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:v}},e.next=3,O.a.post("".concat(x,"/").concat(t,"/comments"),n,r);case 3:return c=e.sent,console.log(c.data),e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N={getAll:g,setToken:function(e){v="bearer ".concat(e)},create:m,update:w,remove:y,createComments:k},L=function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.create(e);case 2:r=t.sent,n({type:"NEW BLOG",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(e,t){return function(){var n=Object(u.a)(o.a.mark((function n(r){var c;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.update(t,e);case 2:c=n.sent,r({type:"LIKE",data:c,id:t});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},I=function(e,t){return function(){var n=Object(u.a)(o.a.mark((function n(r){var c;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.createComments(e,t);case 2:c=n.sent,r({type:"NEW COMMENT",data:c,id:e});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIAL BLOGS":return e=t.data;case"NEW BLOG":return e.concat(t.data);case"LIKE":var n=e.find((function(e){return e.id===t.id})),r=Object(p.a)(Object(p.a)({},n),{},{likes:t.data.likes});return e.map((function(e){return e.id===t.id?r:e}));case"DELETE":var c=t.data;return e.filter((function(e){return e.id!==c.id}));case"NEW COMMENT":var a=e.find((function(e){return e.id===t.id})),s=Object(p.a)(Object(p.a)({},a),{},{comments:t.data.comments});return e.map((function(e){return e.id===t.id?s:e}));default:return e}},E=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("/api/login",t);case 2:return n=e.sent,console.log(n.data),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A={login:E},S="loggedBlogappUser",B=function(){return JSON.parse(localStorage.getItem(S))};console.log(B);var U=function(e){localStorage.setItem(S,JSON.stringify(e))},G=B,W=function(e,t){return console.log(e,t),function(){var n=Object(u.a)(o.a.mark((function n(r){var c;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,A.login({username:e,password:t});case 3:c=n.sent,console.log(c),r({type:"LOGIN",data:c}),U(c),N.setToken(c.token),r(l("welcome to the blog app",5e3)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),r(l("wrong username or password",5e3));case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"LOGOUT":return e=t.data;default:return e}},M=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R={getAll:M},z=function(){return function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.getAll();case 2:n=e.sent,t({type:"INITIAL USERS",data:n}),console.log(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"INITIAL USERS"===t.type?e=t.data:e},J=Object(b.combineReducers)({notification:d,blogs:T,user:D,userList:F}),P=Object(b.createStore)(J,Object(j.composeWithDevTools)(Object(b.applyMiddleware)(h.a)));console.log(P.getState());var K=n(17),V=n(19),H=n(9),Y=n(20),q=n(1),Q=n(127),X=n(109),Z=n(128),$=n(129),_=n(130),ee=n(131),te=n(135),ne=n(62),re=n.n(ne),ce=function(e){var t=e.blogs,n=e.user,r=Object(K.b)(),c=function(e){var n=t.find((function(t){return t.id===e}));if(!0===window.confirm("Remove blog  ".concat(n.title," by ").concat(n.author)))try{r(function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.remove(e);case 2:r=t.sent,n({type:"DELETE",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),r(l("".concat(n.title," by ").concat(n.author," deleted"),5e3))}catch(c){r(l(c.message,5e3))}else r(l("Nothing was deleted",5e3))};return Object(q.jsx)("div",{children:Object(q.jsx)(Q.a,{component:X.a,children:Object(q.jsx)(Z.a,{style:{width:"80%",marginLeft:"60px"},children:Object(q.jsx)($.a,{children:t.sort((function(e,t){return t.likes-e.likes})).map((function(e){return Object(q.jsxs)(_.a,{children:[Object(q.jsx)(ee.a,{children:Object(q.jsx)(Y.b,{to:"/blogs/".concat(e.id),children:e.title})}),n.name===e.user.name?Object(q.jsx)(ee.a,{children:Object(q.jsx)(te.a,{style:{backgroundColor:"lavender"},onClick:function(){return c(e.id)},children:Object(q.jsx)(re.a,{})})}):""]},e.id)}))})})})})},ae=n(63),se=n.n(ae),ie=n(64),oe=n.n(ie),ue=(n(103),function(e){var t=e.match,n=e.blogs;console.log([1,2,3,4].filter((function(e){return 2!==e})));var r=Object(c.useState)(null),a=Object(V.a)(r,2),s=a[0],i=a[1],d=Object(K.b)();console.log(t);var j=t?n.find((function(e){return e.id===t.params.id})):null;console.log(j);var b=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===s||""===s.desc)d(l("Empty comment.",5e3));else try{t=j.id,n={user:j.user.id,likes:j.likes,author:j.author,title:j.title,url:j.url,comments:j.comments.concat(s)},d(I(t,n)),d(l("New comment added for the blogpost  ".concat(n.title),5e3))}catch(r){console.log("error")}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=j.id,n={user:j.user.id,likes:j.likes+1,author:j.author,title:j.title,url:j.url,comments:j.comments},d(C(n,t)),d(l("You have voted ".concat(n.title),5e3))}catch(r){d(l(r.message,5e3))}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return j?Object(q.jsxs)("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},children:[Object(q.jsxs)("div",{className:"Blog",children:[Object(q.jsxs)("h2",{children:[" ",Object(q.jsx)("span",{children:j.title})," ",j.author]}),Object(q.jsx)("a",{href:j.url,target:"blank",children:j.url}),Object(q.jsxs)("p",{children:[j.likes," likes"]}),Object(q.jsx)(te.a,{id:"likeButton",style:{backgroundColor:"lavender"},onClick:h,children:Object(q.jsx)(se.a,{})}),Object(q.jsxs)("p",{children:["Added by ",j.user.name]})]}),Object(q.jsxs)("div",{children:[Object(q.jsx)("p",{children:"Comment:"}),Object(q.jsx)("input",{id:"comments",onChange:function(e){e.preventDefault(),i({desc:e.target.value})},className:"comment"}),Object(q.jsxs)(te.a,{onClick:b,children:[Object(q.jsx)(oe.a,{})," "]}),Object(q.jsx)("h1",{children:"Comments"}),Object(q.jsx)(Z.a,{children:Object(q.jsx)($.a,{children:j.comments.map((function(e,t){return Object(q.jsxs)(_.a,{children:[" ",Object(q.jsx)(ee.a,{children:e.desc})]},t)}))})})]})]}):Object(q.jsx)("div",{children:"What the hell"})}),le=n(132),de=function(e){var t=e.users;return null===t?Object(q.jsx)("div",{}):Object(q.jsxs)("div",{children:[Object(q.jsx)("h1",{children:"Users"}),Object(q.jsx)(Q.a,{component:X.a,children:Object(q.jsxs)(Z.a,{style:{width:"80%",marginLeft:"60px"},children:[Object(q.jsx)(le.a,{children:Object(q.jsxs)(_.a,{children:[Object(q.jsx)(ee.a,{children:Object(q.jsx)("strong",{children:"User"})}),Object(q.jsx)(ee.a,{style:{fontsize:"50"},children:Object(q.jsx)("strong",{children:"Blogs"})})]})}),Object(q.jsx)($.a,{children:t.map((function(e){return Object(q.jsxs)(_.a,{children:[Object(q.jsx)(ee.a,{children:Object(q.jsx)(Y.b,{to:"/users/".concat(e.id),children:e.name})}),Object(q.jsx)(ee.a,{children:e.blogs.length})]},e.id)}))})]})})]})},je=function(e){var t=e.userList,n=e.match;console.log(t),console.log(n.params.id);var r=n?t.find((function(e){return e.id===n.params.id})):null;return console.log(r),r?Object(q.jsxs)("div",{children:[Object(q.jsxs)("h1",{children:[r.name," ","'s blog",":"]}),Object(q.jsx)("h3",{children:"Added blogs:"}),Object(q.jsx)(Z.a,{style:{width:"40%"},children:r.blogs.map((function(e){return Object(q.jsxs)(_.a,{children:[" ",Object(q.jsx)(ee.a,{children:e.title})]},e.id)}))})]}):null},be=(n(104),function(e){var t=e.handleSubmit,n=e.handleUsernameChange,r=e.handlePasswordChange,c=e.username,a=e.password;return Object(q.jsxs)("div",{className:"login",children:[Object(q.jsx)("h1",{children:"Login"}),Object(q.jsxs)("form",{onSubmit:t,children:[Object(q.jsxs)("div",{children:[Object(q.jsx)("h3",{children:"Username:"}),Object(q.jsx)("input",{id:"username",value:c,onChange:n})]}),Object(q.jsxs)("div",{children:[Object(q.jsx)("h3",{children:"Password:"}),Object(q.jsx)("input",{id:"password",type:"Password",name:"password",value:a,onChange:r})]}),Object(q.jsx)("button",{id:"login-button",type:"submit",children:"login"}),Object(q.jsx)("p",{children:" username: Test"}),Object(q.jsx)("p",{children:" password: Test"})]})]})});n(105);function he(e){var t=e.createBlog,n=Object(c.useState)(""),r=Object(V.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(""),o=Object(V.a)(i,2),u=o[0],l=o[1],d=Object(c.useState)(""),j=Object(V.a)(d,2),b=j[0],h=j[1];return Object(q.jsx)("div",{className:"formDiv",children:Object(q.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({title:a,author:u,url:b}),s(""),l(""),h("")},children:[Object(q.jsxs)("p",{children:[Object(q.jsx)("h3",{children:"Title:"}),Object(q.jsx)("input",{id:"title",onChange:function(e){e.preventDefault(),s(e.target.value)}})]}),Object(q.jsxs)("p",{children:[Object(q.jsx)("h3",{children:"Author:"}),Object(q.jsx)("input",{id:"author",onChange:function(e){l(e.target.value)}})]}),Object(q.jsxs)("p",{children:[Object(q.jsx)("h3",{children:"Url:"}),Object(q.jsx)("input",{id:"url",onChange:function(e){h(e.target.value)}})]}),Object(q.jsx)("p",{children:Object(q.jsx)("button",{id:"save",type:"submit",children:"save"})})]})})}n(106);function pe(){var e=Object(K.c)((function(e){return e.notification}));return null===e?Object(q.jsx)("div",{children:""}):e.includes("a new blog")||e.includes("has logged ")||e.includes("have voted")?Object(q.jsx)("div",{className:"addMessage",children:Object(q.jsx)("p",{children:e})}):Object(q.jsx)("div",{className:"error",children:Object(q.jsx)("p",{children:e})})}var fe=function(e){var t=Object(c.useState)(!1),n=Object(V.a)(t,2),r=n[0],a=n[1],s={display:r?"none":""},i={display:r?"":"none"},o=function(){a(!r)};return Object(q.jsxs)("div",{children:[Object(q.jsx)("div",{style:s,children:Object(q.jsx)("button",{onClick:o,children:e.buttonLabel})}),Object(q.jsx)("div",{style:i,children:Object(q.jsxs)("div",{className:"togglableChildren",children:[e.children,Object(q.jsx)("button",{onClick:o,children:"cancel"})]})})]})};fe.displayName="Togglable";var Oe=fe,xe=n(133),ve=n(134),ge=n(65),me=n.n(ge),we=function(){var e=Object(c.useState)(""),t=Object(V.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(V.a)(a,2),i=s[0],d=s[1],j=Object(K.b)(),b=Object(K.c)((function(e){return e.user})),h=Object(K.c)((function(e){return e.blogs})),p=Object(K.c)((function(e){return e.userList}));Object(c.useEffect)((function(){j(function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getAll();case 2:n=e.sent,t({type:"INITIAL BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[j]),Object(c.useEffect)((function(){var e,t=G();j((e=t,function(){var t=Object(u.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return U(e),null!==e&&N.setToken(e.token),t.next=4,n({type:"LOGIN",data:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[j]),Object(c.useEffect)((function(){j(z())}),[j]);var f=Object(H.g)("/users/:id"),O=Object(H.g)("/blogs/:id");console.log(O);var x=Object(H.f)(),v=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(W(n,i)),t.preventDefault(),r(""),d(""),x.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.title&&t.author&&(j(L(t)),j(z()),j(l("a new blog '".concat(t.title,"' by ").concat(t.author," added!"),5e3)))}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===b?Object(q.jsxs)("div",{children:[Object(q.jsx)(pe,{}),Object(q.jsx)(Oe,{buttonLabel:"log in",children:Object(q.jsx)(be,{username:n,password:i,handleUsernameChange:function(e){var t=e.target;return r(t.value)},handlePasswordChange:function(e){var t=e.target;return d(t.value)},handleSubmit:v})})]}):null!==b?Object(q.jsxs)("div",{className:"App",children:[Object(q.jsx)(xe.a,{position:"static",class:"AppBar",children:Object(q.jsxs)(ve.a,{style:{padding:"10",marginLeft:"20px"},children:[Object(q.jsx)(Y.b,{class:"AppBarLink",to:"/",children:"Home"}),Object(q.jsx)(Y.b,{class:"AppBarLink",to:"/blogs",children:"Blogs"}),Object(q.jsx)(Y.b,{class:"AppBarLink",to:"/users",children:"Users"}),Object(q.jsx)(me.a,{style:{marginLeft:"190px"}}),Object(q.jsx)("em",{style:{padding:"10"},children:b.name}),Object(q.jsx)(te.a,{style:{padding:"10",marginLeft:"60px",backgroundColor:"lavender"},onClick:function(){window.localStorage.removeItem("loggedBlogappUser"),j(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT",data:null}),t(l("logged out",5e3));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"logout"})]})}),Object(q.jsx)("div",{children:Object(q.jsx)(pe,{})}),Object(q.jsxs)(H.c,{children:[Object(q.jsx)(H.a,{path:"/users/:id",children:Object(q.jsx)(je,{match:f,userList:p})}),Object(q.jsx)(H.a,{path:"/blogs/:id",children:Object(q.jsx)(ue,{match:O,user:b,blogs:h})}),Object(q.jsxs)(H.a,{path:"/blogs",children:[Object(q.jsx)("h2",{children:"Create new Blog:"}),Object(q.jsx)(Oe,{buttonLabel:"create blog",children:Object(q.jsx)(he,{createBlog:g,user:b})}),Object(q.jsx)("h1",{children:"Blogs:"}),Object(q.jsx)(ce,{user:b,blogs:h})]}),Object(q.jsxs)(H.a,{path:"/users",children:[" ",Object(q.jsx)(de,{users:p})]}),Object(q.jsx)(H.a,{path:"/",children:Object(q.jsx)("loginForm",{})})]}),Object(q.jsx)("div",{className:"footer",children:Object(q.jsx)("em",{className:"footerText",children:"Copyrights @Biswas KC 2021"})})]}):void 0};s.a.render(Object(q.jsx)(K.a,{store:P,children:Object(q.jsx)(Y.a,{children:Object(q.jsx)(we,{})})}),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.c762ad77.chunk.js.map